# WEB2-Home server-5.port

지금까지 공유기란 무엇인가, IP는 어떤 관계에 있는가를 살펴봤다

현재까지는 사람이 쓰고 있는 컴퓨터를 클라이언트로 이용한 것을 보았다

지금부터는 우리의 목표인 서버로 컴퓨터를 사용하고 싶은 경우 어떻게 해야하는가!를 살펴볼 것이다

바깥에 있는 컴퓨터들이 나의 컴퓨터에 어떻게 접속하게 할 수 있을까?

접속이 들어왔을 때 폰, 컴, 노트북에서 누가 

서버로서 응답하게 할 것인가를 공유기가 교환, 연결할 수 있는 방법에 대해 알아보자

그 기술은 PORT FORWARDING 이다

PORT라는 굉장히 중요한 개념이 있다

항구 == PORT, 배가 정착하는 곳

컴퓨터에도 PORT라는 개념이 있다

하나의 컴퓨터에는 웹 서버가 여러 개가 설치되어 있을 수 있다
또 웹 서버가 아니라 여러 형태의 서버가 있을 수 있다
게임 서버, 채팅 서버, 미디어 서버, FTP 서버 등등등

우리가 특정 컴퓨터에 접속을 했을 때, 그 컴퓨터에는 여러 서버가 있는데

그 서버들을 어떻게 식별하는가? -> 어떠한 컴퓨터끼리 상호작용할 것인지를 알려줘야 하는데

그 때 사용하는 것이 PORT번호이다

0 ~ 65535 포트 번호가 존재한다

22번 - SSH
80번 - http == hypertext transfer portocol
웹페이지를 주고 받을 때의 통신 규약을 말한다
웹은 http라는 프로토콜을 이용하고 있는 통신 시스템!
80번은 웹이 쓰도록 정해져있다' why? 웹은 중요하니까!

0번부터 1023번까지는 Well-known port, 예약된 포트!
써도 되지만 막혀 있고, 문제가 생길 수 있다

웹서버를 설치하면 기본적으로 80번에 연결되도록 설정 되어 있다
연결되어 있다 == listening 이라고 표현
서버는 듣고 있다가 요청에 응답하는 방식이기 때문에!

경우에 따라서 서버를 컴퓨터에 두 대를 깔고 싶다면?
이미 80번 포트를 웹서버가 쓰고 있기 때문에 웹서버를 하나 더 까려면 80번은 못 쓴다
에러가 발생할 것 -> 다른 포트번호 사용(관습적으로 8080번 많이 사용)


어떻게 두 개의 웹 서버가 누구와 상호작 할 것인지를 알 수 있을까
url에 비밀이 있다

http://opentutorials.org 를 주소창에 치면 80번 포트와 연결이 된다
http는 기본 80이기 때문에

만약, 다른 포트번호의 서버로 가고 싶다면
http://opentutorials.org.8080 이라고 입력하면 된다

구글링 : url format

# 6. port forwarding

PORT FORWARDING 개념에 대해 알아보자

public address == 59.6.66.238 (1)
서버를 구축한 IP address == 192.168.0.4 (2)
(2)에 접속하게 하려면 (1)을 알려줘야 하는데,
(1)로 접속 했을 때 (2)로 접속하게끔 해 줘야 한다 -> port를 이용하여!

공유기에 다음과 같이 port forwarding 설정을 한다

59.6.66.238:8081 -> 192.168.0.4:80
공인ip로 8081 포트 번호로 접속이 들어오면
그 접속은 내부네트워크에 있는 192.168.0.4의 80번 포트로 보낸다!(노트북)
누가? 공유기가!
8080번 포트로 들어오면 192.168.0.3:80, 192.168.0.3 ip의 80번 포트로 보낸다(컴퓨터) 

router가 안내자의 역할을 한다
안내자의 역할을 하게 하려면 router의 설정을 바꿔줘야 한다


# 7.Dynamic & STATIC IP address
유동 IP == Dynamic IP

내 집이 있다 
인터넷을 쓰기 위해서 통신사(ISP, Internet Service Provider)와 계약을 해서
케이블을 꽂으면 ip address가 생긴다
컴퓨터에 웹 서버를 깔고 누군가에게 ip 주소를 알려줌 
-> 그 사람이 그 ip 주소를 타고 내 웹 서버에 접속이 가능하다

모든 집집마다 ip를 하나씩 주다보면 ip address가 턱없이 부족
그래서 유동ip를 쓰게 되었다
주어진 ip가 계속해서 바뀜
돌려막기 ㅋㅋ

if, 내가 여행을 떠나서 인터넷을 사용하지 않을 때
나의 ip 주소를 회수, 다른 가입자, 다른 사용자에게 그 ip를 준다
나중에 한  달 뒤, 컴퓨터를 켰을 때, 새로운 ip를 부여한다
ip가 자꾸만 자꾸만 바뀐다, 동적으로! == dynamic!

중간의 통신사들을 많은 가입자들이 동시에 인터넷을 사용하지 않기 때문에
안 쓰는 사람의 것을 회수해서 쓰기 시작한 사람한테 주고,,
회수,,빌림,,, 아이피를 임대, 돌려막기를 하면서
거대한 가입자들에게 아이피를 제공할 수 있게 된다

문제는?
컴퓨터에 웹 서버를 깔았다면 유동ip의 경우
내 컴퓨터와 접속을 원하는 컴퓨터가 다른 사람의 컴퓨터로 접속하게 되어버린다
-> dynamic address의 단점

static ip address == 정적ip
컴퓨터의 ip를 고정시킨다
통신사에게 2~3만원을 더 주면 고정ip를 부여해준다(독점적 사용)

















